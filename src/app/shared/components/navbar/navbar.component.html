<mat-sidenav-container class="navbar-container">
  <mat-sidenav #drawer class="sidenav" mode="over" (closedStart)="showSearch=false">
    <mat-nav-list>
      <a mat-list-item routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" (click)="drawer.close()">Home</a>
      <a mat-list-item [matMenuTriggerFor]="trackingMenu">Tracking <mat-icon>expand_more</mat-icon></a>
      <a mat-list-item routerLink="/history" routerLinkActive="active" (click)="drawer.close()">History</a>
      <a mat-list-item [matMenuTriggerFor]="helpMenu">Help <mat-icon>expand_more</mat-icon></a>
      <a mat-list-item routerLink="/about" routerLinkActive="active" (click)="drawer.close()">About</a>
      <a mat-list-item routerLink="/find-location" routerLinkActive="active" (click)="drawer.close()">Find Location</a>
      <a mat-list-item routerLink="/notifications" routerLinkActive="active" (click)="drawer.close()" class="notification-link">
        <mat-icon>notifications</mat-icon>
        <span class="notification-badge" *ngIf="notificationCount > 0">{{ notificationCount }}</span>
      </a>
      <a mat-list-item routerLink="/auth/login" routerLinkActive="active" (click)="drawer.close()">
        <mat-icon>account_circle</mat-icon>
        Login/Register
      </a>
    </mat-nav-list>
  </mat-sidenav>

  <mat-toolbar color="primary">
    <button mat-icon-button class="navbar__toggle" (click)="toggleMobileMenu()" aria-label="Toggle menu">
      <mat-icon>{{drawer?.opened ? 'close' : 'menu'}}</mat-icon>
    </button>
    <a class="navbar__logo" routerLink="/">FedEx</a>
    <span class="spacer"></span>
    <nav class="desktop-menu">
      <a mat-button routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact:true}">Home</a>
      <button mat-button [matMenuTriggerFor]="trackingMenu">Tracking <mat-icon>expand_more</mat-icon></button>
      <a mat-button routerLink="/history" routerLinkActive="active">History</a>
      <button mat-button [matMenuTriggerFor]="helpMenu">Help <mat-icon>expand_more</mat-icon></button>
      <a mat-button routerLink="/about" routerLinkActive="active">About</a>
      <a mat-button routerLink="/find-location" routerLinkActive="active">Find Location</a>
      <a mat-icon-button routerLink="/notifications" routerLinkActive="active" class="notification-button">
        <mat-icon>notifications</mat-icon>
        <span class="notification-badge" *ngIf="notificationCount > 0">{{ notificationCount }}</span>
      </a>
      <a mat-button routerLink="/auth/login" routerLinkActive="active">
        <mat-icon>account_circle</mat-icon>
        Login/Register
      </a>
    </nav>
    <div class="navbar__search">
      <button mat-icon-button (click)="toggleSearch()" aria-label="Search">
        <mat-icon>search</mat-icon>
      </button>
      <input *ngIf="showSearch" matInput type="text" class="search-input" placeholder="Rechercher..." />
    </div>
  </mat-toolbar>
</mat-sidenav-container>

<mat-menu #trackingMenu="matMenu" class="tracking-menu">
  <div class="tracking-content">
    <h4>Tracking ID</h4>
    <div class="tracking-input-group">
      <input matInput [(ngModel)]="quickTrackingNumber" placeholder="Insert Tracking ID Number" />
      <button mat-raised-button color="primary" (click)="quickTrack()">TRACK <mat-icon>arrow_forward</mat-icon></button>
    </div>
    <mat-divider></mat-divider>
    <button mat-menu-item routerLink="/tracking" [queryParams]="{type:'advanced'}">Advanced Shipment Tracking</button>
    <button mat-menu-item routerLink="/advanced-tracking">Advanced Shipment Management</button>
    <button mat-menu-item routerLink="/tracking" [queryParams]="{type:'mobile'}">Track by Mobile</button>
    <button mat-menu-item routerLink="/tracking"><strong>All Tracking Services</strong></button>
  </div>
</mat-menu>

<mat-menu #helpMenu="matMenu">
  <button mat-menu-item routerLink="/help" fragment="advice">Advice</button>
  <button mat-menu-item routerLink="/help" fragment="tools">Tracking Tools</button>
  <button mat-menu-item routerLink="/help" fragment="faq">Tracking FAQs</button>
  <button mat-menu-item routerLink="/help" fragment="contact">Contact Us</button>
</mat-menu>
